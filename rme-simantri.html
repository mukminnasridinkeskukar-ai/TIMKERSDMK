<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RME SIMANTRI - Rekam Medis Elektronik Praktik Mandiri</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <i class="fas fa-heartbeat logo-icon"></i>
                <h1>RME SIMANTRI</h1>
                <p>Rekam Medis Elektronik Praktik Mandiri</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <div class="form-group">
                    <label for="practiceName">Nama Praktik</label>
                    <input type="text" id="practiceName" required>
                </div>
                <div class="form-group">
                    <label for="doctorName">Nama Dokter/Perawat</label>
                    <input type="text" id="doctorName" required>
                </div>
                <div class="form-group">
                    <label for="licenseNumber">Nomor STR/SIPP</label>
                    <input type="text" id="licenseNumber" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Masuk</button>
            </form>
            <p class="login-note">Demo: Gunakan username "admin" dan password "admin123"</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="app-container hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-heartbeat"></i>
                <span>RME SIMANTRI</span>
            </div>
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-details">
                    <span id="displayDoctorName">Dokter</span>
                    <small id="displayPracticeName">Praktik</small>
                </div>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-module="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-module="patients">
                    <i class="fas fa-users"></i>
                    <span>Pasien</span>
                </a>
                <a href="#" class="nav-item" data-module="consultation">
                    <i class="fas fa-stethoscope"></i>
                    <span>Konsultasi</span>
                </a>
                <a href="#" class="nav-item" data-module="vitals">
                    <i class="fas fa-heart"></i>
                    <span>Tanda Vital</span>
                </a>
                <a href="#" class="nav-item" data-module="diagnosis">
                    <i class="fas fa-diagnoses"></i>
                    <span>Diagnosis</span>
                </a>
                <a href="#" class="nav-item" data-module="prescription">
                    <i class="fas fa-prescription"></i>
                    <span>Resep</span>
                </a>
                <a href="#" class="nav-item" data-module="certificate">
                    <i class="fas fa-file-medical"></i>
                    <span>Surat Keterangan</span>
                </a>
                <a href="#" class="nav-item" data-module="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>Laporan</span>
                </a>
                <a href="#" class="nav-item" data-module="settings">
                    <i class="fas fa-cog"></i>
                    <span>Pengaturan</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button id="logoutBtn" class="btn btn-logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Keluar</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Module -->
            <div id="dashboardModule" class="module active">
                <div class="module-header">
                    <h2>Dashboard</h2>
                    <span id="currentDate"></span>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon patients">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Pasien</h3>
                            <p id="totalPatients">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon visits">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Kunjungan Hari Ini</h3>
                            <p id="todayVisits">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon prescriptions">
                            <i class="fas fa-prescription"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Resep Hari Ini</h3>
                            <p id="todayPrescriptions">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon certificates">
                            <i class="fas fa-file-medical"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Surat Terbit Hari Ini</h3>
                            <p id="todayCertificates">0</p>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Kunjungan Terbaru</h3>
                        <div class="recent-visits-list" id="recentVisitsList">
                            <p class="empty-message">Belum ada kunjungan hari ini</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Pasien Terbaru</h3>
                        <div class="recent-patients-list" id="recentPatientsList">
                            <p class="empty-message">Belum ada pasien terdaftar</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Patients Module -->
            <div id="patientsModule" class="module">
                <div class="module-header">
                    <h2>Manajemen Pasien</h2>
                    <button class="btn btn-primary" onclick="showModal('patientModal')">
                        <i class="fas fa-plus"></i> Tambah Pasien
                    </button>
                </div>
                <div class="search-bar">
                    <input type="text" id="patientSearch" placeholder="Cari pasien..." onkeyup="searchPatients()">
                    <select id="patientFilter">
                        <option value="">Semua</option>
                        <option value="today">Terdaftar Hari Ini</option>
                        <option value="week">Minggu Ini</option>
                        <option value="month">Bulan Ini</option>
                    </select>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>No. RM</th>
                                <th>Nama</th>
                                <th>NIK</th>
                                <th>Tanggal Lahir</th>
                                <th>Jenis Kelamin</th>
                                <th>Telepon</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="patientsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Consultation Module -->
            <div id="consultationModule" class="module">
                <div class="module-header">
                    <h2>Konsultasi</h2>
                    <button class="btn btn-primary" onclick="startNewConsultation()">
                        <i class="fas fa-plus"></i> Konsultasi Baru
                    </button>
                </div>
                <div class="consultation-container">
                    <div class="patient-select-section">
                        <label>Pilih Pasien:</label>
                        <select id="consultationPatient" onchange="loadPatientConsultationHistory()">
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                    <div class="consultation-history" id="consultationHistory">
                        <h3>Riwayat Kunjungan</h3>
                        <div id="historyList"></div>
                    </div>
                    <div class="consultation-form" id="consultationForm" style="display: none;">
                        <h3>Konsultasi Baru</h3>
                        <form id="newConsultationForm">
                            <input type="hidden" id="consultationPatientId">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Keluhan Utama</label>
                                    <textarea id="chiefComplaint" rows="3" required></textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Riwayat Penyakit</label>
                                    <textarea id="medicalHistory" rows="2"></textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Pemeriksaan Fisik</label>
                                    <textarea id="physicalExamination" rows="2"></textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Catatan</label>
                                    <textarea id="consultationNotes" rows="2"></textarea>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="cancelConsultation()">Batal</button>
                                <button type="submit" class="btn btn-primary">Simpan Konsultasi</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Vitals Module -->
            <div id="vitalsModule" class="module">
                <div class="module-header">
                    <h2>Tanda Vital</h2>
                </div>
                <div class="vitals-container">
                    <div class="patient-select-section">
                        <label>Pilih Pasien:</label>
                        <select id="vitalsPatient" onchange="loadPatientVitals()">
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                    <div class="vitals-form-section" id="vitalsFormSection" style="display: none;">
                        <h3>Catat Tanda Vital</h3>
                        <form id="vitalsForm">
                            <input type="hidden" id="vitalsPatientId">
                            <div class="vitals-grid">
                                <div class="vital-input">
                                    <label>Tekanan Darah (mmHg)</label>
                                    <div class="input-group">
                                        <input type="number" id="systolic" placeholder="Sistolik" min="60" max="250">
                                        <span>/</span>
                                        <input type="number" id="diastolic" placeholder="Diastolik" min="40" max="150">
                                    </div>
                                </div>
                                <div class="vital-input">
                                    <label>Detak Jantung (bpm)</label>
                                    <input type="number" id="heartRate" placeholder="bpm" min="40" max="200">
                                </div>
                                <div class="vital-input">
                                    <label>Suhu Tubuh (°C)</label>
                                    <input type="number" id="temperature" step="0.1" placeholder="°C" min="35" max="42">
                                </div>
                                <div class="vital-input">
                                    <label>Frekuensi Napas (rpm)</label>
                                    <input type="number" id="respiratoryRate" placeholder="rpm" min="10" max="40">
                                </div>
                                <div class="vital-input">
                                    <label>Saturation O2 (%)</label>
                                    <input type="number" id="oxygenSaturation" placeholder="%" min="70" max="100">
                                </div>
                                <div class="vital-input">
                                    <label>Berat Badan (kg)</label>
                                    <input type="number" id="weight" step="0.1" placeholder="kg" min="0" max="300">
                                </div>
                                <div class="vital-input">
                                    <label>Tinggi Badan (cm)</label>
                                    <input type="number" id="height" placeholder="cm" min="50" max="250">
                                </div>
                                <div class="vital-input">
                                    <label>IMT</label>
                                    <input type="text" id="bmi" readonly>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="cancelVitals()">Batal</button>
                                <button type="submit" class="btn btn-primary">Simpan Tanda Vital</button>
                            </div>
                        </form>
                    </div>
                    <div class="vitals-history" id="vitalsHistory">
                        <h3>Riwayat Tanda Vital</h3>
                        <div id="vitalsList"></div>
                    </div>
                </div>
            </div>

            <!-- Diagnosis Module -->
            <div id="diagnosisModule" class="module">
                <div class="module-header">
                    <h2>Diagnosis</h2>
                    <button class="btn btn-primary" onclick="showDiagnosisModal()">
                        <i class="fas fa-plus"></i> Tambah Diagnosis
                    </button>
                </div>
                <div class="diagnosis-container">
                    <div class="patient-select-section">
                        <label>Pilih Pasien:</label>
                        <select id="diagnosisPatient" onchange="loadPatientDiagnosis()">
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                    <div class="diagnosis-history" id="diagnosisHistory">
                        <h3>Riwayat Diagnosis</h3>
                        <div id="diagnosisList"></div>
                    </div>
                </div>
            </div>

            <!-- Prescription Module -->
            <div id="prescriptionModule" class="module">
                <div class="module-header">
                    <h2>Resep Obat</h2>
                    <button class="btn btn-primary" onclick="showPrescriptionModal()">
                        <i class="fas fa-plus"></i> Buat Resep
                    </button>
                </div>
                <div class="prescription-container">
                    <div class="patient-select-section">
                        <label>Pilih Pasien:</label>
                        <select id="prescriptionPatient" onchange="loadPatientPrescriptions()">
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                    <div class="prescription-history" id="prescriptionHistory">
                        <h3>Riwayat Resep</h3>
                        <div id="prescriptionList"></div>
                    </div>
                </div>
            </div>

            <!-- Certificate Module -->
            <div id="certificateModule" class="module">
                <div class="module-header">
                    <h2>Surat Keterangan</h2>
                    <button class="btn btn-primary" onclick="showCertificateModal()">
                        <i class="fas fa-plus"></i> Buat Surat
                    </button>
                </div>
                <div class="certificate-container">
                    <div class="patient-select-section">
                        <label>Pilih Pasien:</label>
                        <select id="certificatePatient" onchange="loadPatientCertificates()">
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                    <div class="certificate-history" id="certificateHistory">
                        <h3>Riwayat Surat</h3>
                        <div id="certificateList"></div>
                    </div>
                </div>
            </div>

            <!-- Reports Module -->
            <div id="reportsModule" class="module">
                <div class="module-header">
                    <h2>Laporan</h2>
                </div>
                <div class="reports-container">
                    <div class="report-filters">
                        <div class="filter-group">
                            <label>Periode:</label>
                            <select id="reportPeriod" onchange="updateReport()">
                                <option value="today">Hari Ini</option>
                                <option value="week">Minggu Ini</option>
                                <option value="month">Bulan Ini</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="filter-group custom-date" id="customDateRange" style="display: none;">
                            <input type="date" id="reportStartDate">
                            <span>s/d</span>
                            <input type="date" id="reportEndDate">
                            <button class="btn btn-secondary" onclick="updateReport()">Tampilkan</button>
                        </div>
                        <button class="btn btn-primary" onclick="printReport()">
                            <i class="fas fa-print"></i> Cetak
                        </button>
                    </div>
                    <div class="report-summary">
                        <div class="summary-card">
                            <h4>Total Kunjungan</h4>
                            <p id="reportTotalVisits">0</p>
                        </div>
                        <div class="summary-card">
                            <h4>Total Pasien Baru</h4>
                            <p id="reportNewPatients">0</p>
                        </div>
                        <div class="summary-card">
                            <h4>Total Diagnosis</h4>
                            <p id="reportTotalDiagnosis">0</p>
                        </div>
                        <div class="summary-card">
                            <h4>Total Resep</h4>
                            <p id="reportTotalPrescriptions">0</p>
                        </div>
                    </div>
                    <div class="report-details">
                        <h3>Detail Kunjungan</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Tanggal</th>
                                        <th>No. RM</th>
                                        <th>Nama Pasien</th>
                                        <th>Keluhan</th>
                                        <th>Diagnosis</th>
                                    </tr>
                                </thead>
                                <tbody id="reportTableBody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Module -->
            <div id="settingsModule" class="module">
                <div class="module-header">
                    <h2>Pengaturan</h2>
                </div>
                <div class="settings-container">
                    <div class="settings-section">
                        <h3>Informasi Praktik</h3>
                        <form id="practiceInfoForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Nama Praktik</label>
                                    <input type="text" id="settingPracticeName">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Nama Dokter/Perawat</label>
                                    <input type="text" id="settingDoctorName">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Nomor STR/SIPP</label>
                                    <input type="text" id="settingLicenseNumber">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Alamat Praktik</label>
                                    <textarea id="settingAddress" rows="2"></textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Telepon</label>
                                    <input type="text" id="settingPhone">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Simpan</button>
                            </div>
                        </form>
                    </div>
                    <div class="settings-section">
                        <h3>Pengaturan Sistem</h3>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="autoBackup" checked> Backup Otomatis
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="autoSave"> Auto-save
                            </label>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3>Data</h3>
                        <div class="data-actions">
                            <button class="btn btn-secondary" onclick="exportData()">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                            <button class="btn btn-secondary" onclick="importData()">
                                <i class="fas fa-upload"></i> Import Data
                            </button>
                            <button class="btn btn-danger" onclick="clearAllData()">
                                <i class="fas fa-trash"></i> Hapus Semua Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Patient Modal -->
    <div id="patientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tambah/Edit Pasien</h3>
                <button class="close-btn" onclick="closeModal('patientModal')">&times;</button>
            </div>
            <form id="patientForm">
                <input type="hidden" id="patientId">
                <div class="form-row">
                    <div class="form-group">
                        <label>No. RM</label>
                        <input type="text" id="patientRM" readonly>
                    </div>
                    <div class="form-group">
                        <label>NIK</label>
                        <input type="text" id="patientNIK" required maxlength="16">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nama Lengkap</label>
                        <input type="text" id="patientName" required>
                    </div>
                    <div class="form-group">
                        <label>Tanggal Lahir</label>
                        <input type="date" id="patientDOB" required onchange="calculateAge()">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Jenis Kelamin</label>
                        <select id="patientGender" required>
                            <option value="">Pilih</option>
                            <option value="L">Laki-laki</option>
                            <option value="P">Perempuan</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Usia</label>
                        <input type="text" id="patientAge" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Telepon</label>
                        <input type="text" id="patientPhone">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="patientEmail">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group full-width">
                        <label>Alamat</label>
                        <textarea id="patientAddress" rows="2"></textarea>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Pekerjaan</label>
                        <input type="text" id="patientJob">
                    </div>
                    <div class="form-group">
                        <label>Agama</label>
                        <select id="patientReligion">
                            <option value="">Pilih</option>
                            <option value="Islam">Islam</option>
                            <option value="Kristen">Kristen</option>
                            <option value="Katolik">Katolik</option>
                            <option value="Hindu">Hindu</option>
                            <option value="Budha">Budha</option>
                            <option value="Lainnya">Lainnya</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nama Wali</label>
                        <input type="text" id="patientGuardian">
                    </div>
                    <div class="form-group">
                        <label>Telepon Wali</label>
                        <input type="text" id="patientGuardianPhone">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('patientModal')">Batal</button>
                    <button type="submit" class="btn btn-primary">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Diagnosis Modal -->
    <div id="diagnosisModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tambah Diagnosis</h3>
                <button class="close-btn" onclick="closeModal('diagnosisModal')">&times;</button>
            </div>
            <form id="diagnosisForm">
                <input type="hidden" id="diagnosisId">
                <input type="hidden" id="diagnosisPatientId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Pilih Pasien</label>
                        <select id="diagnosisSelectPatient" required>
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Kode ICD-10</label>
                        <input type="text" id="icdCode" placeholder="Contoh: J01.0" required>
                        <small>Klik untuk lihat daftar ICD-10</small>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nama Diagnosis</label>
                        <input type="text" id="diagnosisName" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Jenis Diagnosis</label>
                        <select id="diagnosisType" required>
                            <option value="utama">Utama</option>
                            <option value="sekunder">Sekunder</option>
                            <option value="komplikasi">Komplikasi</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Catatan</label>
                        <textarea id="diagnosisNotes" rows="2"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('diagnosisModal')">Batal</button>
                    <button type="submit" class="btn btn-primary">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ICD-10 Search Modal -->
    <div id="icd10Modal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>Daftar ICD-10</h3>
                <button class="close-btn" onclick="closeModal('icd10Modal')">&times;</button>
            </div>
            <div class="icd-search">
                <input type="text" id="icdSearch" placeholder="Cari ICD-10..." onkeyup="searchICD10()">
            </div>
            <div class="icd-list" id="icd10List"></div>
        </div>
    </div>

    <!-- Prescription Modal -->
    <div id="prescriptionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Buat Resep Obat</h3>
                <button class="close-btn" onclick="closeModal('prescriptionModal')">&times;</button>
            </div>
            <form id="prescriptionForm">
                <input type="hidden" id="prescriptionId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Pilih Pasien</label>
                        <select id="prescriptionSelectPatient" required>
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                </div>
                <div class="prescription-items" id="prescriptionItems">
                    <h4>Obat-obatan</h4>
                    <div class="prescription-item">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Nama Obat</label>
                                <input type="text" class="medicineName" placeholder="Nama obat" required>
                            </div>
                            <div class="form-group">
                                <label>Dosis</label>
                                <input type="text" class="medicineDose" placeholder="Contoh: 500mg" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Jumlah</label>
                                <input type="number" class="medicineQty" placeholder="Jumlah" min="1" required>
                            </div>
                            <div class="form-group">
                                <label>Aturan Pakai</label>
                                <input type="text" class="medicineUsage" placeholder="Contoh: 3x1 sehari" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label>Catatan</label>
                                <textarea class="medicineNotes" rows="2"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-secondary btn-sm" onclick="addPrescriptionItem()">
                    <i class="fas fa-plus"></i> Tambah Obat
                </button>
                <div class="form-row" style="margin-top: 15px;">
                    <div class="form-group full-width">
                        <label>Catatan Resep</label>
                        <textarea id="prescriptionNotes" rows="2"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('prescriptionModal')">Batal</button>
                    <button type="submit" class="btn btn-primary">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div id="certificateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Buat Surat Keterangan</h3>
                <button class="close-btn" onclick="closeModal('certificateModal')">&times;</button>
            </div>
            <form id="certificateForm">
                <input type="hidden" id="certificateId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Pilih Pasien</label>
                        <select id="certificateSelectPatient" required>
                            <option value="">-- Pilih Pasien --</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Jenis Surat</label>
                        <select id="certificateType" required onchange="updateCertificateTemplate()">
                            <option value="sakit">Surat Keterangan Sakit</option>
                            <option value="sehat">Surat Keterangan Sehat</option>
                            <option value="rawat">Surat Keterangan Rawat Jalan</option>
                            <option value="kehilangan">Surat Keterangan Kehilangan</option>
                            <option value="custom">Surat Custom</option>
                        </select>
                    </div>
                </div>
                <div class="form-row" id="customCertificateTitle" style="display: none;">
                    <div class="form-group full-width">
                        <label>Judul Surat</label>
                        <input type="text" id="certificateTitle" placeholder="Judul surat">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tanggal</label>
                        <input type="date" id="certificateDate" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Berlaku Sampai</label>
                        <input type="date" id="certificateValidUntil">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group full-width">
                        <label>Isi Surat</label>
                        <textarea id="certificateContent" rows="10" required></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('certificateModal')">Batal</button>
                    <button type="button" class="btn btn-secondary" onclick="previewCertificate()">Preview</button>
                    <button type="submit" class="btn btn-primary">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Certificate Preview Modal -->
    <div id="certificatePreviewModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>Preview Surat</h3>
                <button class="close-btn" onclick="closeModal('certificatePreviewModal')">&times;</button>
            </div>
            <div class="certificate-preview" id="certificatePreview"></div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeModal('certificatePreviewModal')">Tutup</button>
                <button type="button" class="btn btn-primary" onclick="printCertificate()">Cetak</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
</body>
</html>
