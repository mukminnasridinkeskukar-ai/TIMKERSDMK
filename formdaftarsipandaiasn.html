<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Form Pendaftaran Pengembangan Kompetensi ASN</title>

<style>
body{
  font-family:Segoe UI,Arial,sans-serif;
  background:#eef2f7;
  padding:20px
}
.container{
  max-width:1150px;
  margin:auto;
  padding:22px;
  background:#f8fafc;
  border-radius:18px;
  box-shadow:0 12px 35px rgba(0,0,0,.12)
}
h2{text-align:center;margin-bottom:22px}

/* ===== BLOK INFO KEGIATAN (TAMBAHAN) ===== */
.info-kegiatan{
  background:linear-gradient(135deg,#ecfeff,#f0fdf4);
  border-radius:18px;
  padding:20px;
  margin-bottom:24px;
  box-shadow:0 8px 25px rgba(0,0,0,.08)
}
.info-kegiatan h3{
  margin:0 0 14px;
  text-align:center;
  color:#0f766e
}
.info-item{
  display:grid;
  grid-template-columns:200px 1fr;
  gap:12px;
  margin-bottom:12px
}
.info-item .label{
  font-weight:800;
  color:#1e293b
}
.info-item .value{
  color:#334155;
  line-height:1.5
}
@media(max-width:640px){
  .info-item{grid-template-columns:1fr}
}
/* ======================================= */

input,select{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:14px
}
label{font-weight:600;margin:12px 0 6px;display:block}

/* BUTTON GROUP */
.btn-group{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:10px;
  margin-bottom:14px
}
.btn-group button{
  padding:12px;
  border:none;
  border-radius:14px;
  background:#e5e7eb;
  font-weight:600;
  cursor:pointer;
  transition:.25s
}
.btn-group button.active{
  background:#2563eb;
  color:#fff;
  transform:scale(1.05)
}

/* SUBMIT */
.submit-btn{
  width:100%;
  padding:15px;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,#16a34a,#22c55e);
  color:#fff;
  font-size:16px;
  font-weight:bold;
  cursor:pointer
}

/* COUNTER */
.counter-box{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:12px;
  margin-bottom:18px
}
.counter-item{
  background:linear-gradient(135deg,#e0f2fe,#f0fdf4);
  padding:14px;
  border-radius:16px;
  text-align:center;
  font-weight:700
}
.counter-item span{
  display:block;
  font-size:26px;
  color:#16a34a
}
.badge{
  grid-column:1/-1;
  text-align:center;
  padding:10px;
  border-radius:14px;
  background:#dc2626;
  color:#fff;
  font-weight:800;
  animation:pulse 1.5s infinite
}
.hidden{display:none}

/* STATUS */
.status-waktu{
  padding:16px;
  border-radius:16px;
  text-align:center;
  font-weight:800;
  margin-bottom:12px
}
.status-buka{background:#dcfce7;color:#166534}
.status-belum{background:#fef9c3;color:#854d0e}
.status-tutup{background:#fee2e2;color:#991b1b}

/* COUNTDOWN */
.countdown-box{
  margin-bottom:12px;
  padding:16px;
  border-radius:16px;
  text-align:center;
  font-weight:900;
  font-size:18px;
  background:linear-gradient(135deg,#ede9fe,#ecfeff);
  color:#1e3a8a
}
.countdown-time{
  font-size:22px;
  margin-top:6px;
  color:#0f766e
}

/* WARNING */
.warning{
  margin-bottom:16px;
  padding:14px;
  border-radius:14px;
  background:#fef3c7;
  color:#92400e;
  font-weight:800;
  text-align:center;
  display:none
}

/* PROGRESS */
.progress-wrap{margin-bottom:18px}
.progress-bar-bg{
  background:#e5e7eb;
  border-radius:14px;
  overflow:hidden
}
.progress-bar{
  height:22px;
  width:0%;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  text-align:center;
  color:white;
  font-weight:800
}

/* TEMA */
#tema{
  min-height:120px;
  white-space:normal
}
#tema option{
  white-space:normal;
  line-height:1.4
}

#notif{text-align:center;margin-top:16px;font-weight:700}

@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.05)}
  100%{transform:scale(1)}
}
</style>
</head>

<body>

<div class="container">
<h2>üìã Form Pendaftaran Pengembangan Kompetensi ASN</h2>

<!-- ===== INFO KEGIATAN (PALING ATAS) ===== -->
<div class="info-kegiatan">
  <h3>üìå Informasi Kegiatan</h3>

  <div class="info-item">
    <div class="label">Tema Kegiatan</div>
    <div class="value">
      Optimalisasi Pemanfaatan SKP Platform dan Plataran Sehat dalam Pemenuhan
      Kecukupan SKP Tenaga Medis dan Tenaga Kesehatan di FKTP dan FKTRL
    </div>
  </div>

  <div class="info-item">
    <div class="label">Jadwal Pelaksanaan</div>
    <div class="value">
      Kamis, 22 Januari 2026<br>
      Pukul 13.00 ‚Äì 16.00 WITA
    </div>
  </div>

  <div class="info-item">
    <div class="label">JP ASN</div>
    <div class="value">
      Sertifikat Bangkom BKPSDM Kutai Kartanegara<br>
      Setara 2 Jam Pelajaran
    </div>
  </div>
  
  <div class="info-item">
    <div class="label">Pemateri</div>
    <div class="value">
      ‚Ä¢ Tim Kerja SDM Kesehatan Dinas Kesehatan<br>
      ‚Ä¢ Ketua Ikatan Bidan Indonesia Pengcab. Kutai Kartanegara<br>
      ‚Ä¢ Praktisi Pengembangan SDM Kesehatan
    </div>
  </div>
</div>
<!-- ===================================== -->

<!-- COUNTER -->
<div class="counter-box">
  <div class="counter-item">üë• Total Pendaftar<span id="total">0</span></div>
  <div class="counter-item">üé• Zoom<span id="zoom">0</span></div>
  <div class="counter-item">üì∫ YouTube<span id="youtube">0</span></div>
  <div id="badge" class="badge hidden">üî• Hampir Penuh</div>
</div>

<!-- PROGRESS -->
<div class="progress-wrap">
  <div style="font-weight:700;margin-bottom:6px">üìä Progress Kuota</div>
  <div class="progress-bar-bg">
    <div id="progressBar" class="progress-bar">0%</div>
  </div>
</div>

<!-- STATUS -->
<div id="statusWaktu" class="status-waktu"></div>
<div id="countdown" class="countdown-box"></div>
<div id="warning1jam" class="warning">
  ‚è∞ Pendaftaran akan ditutup dalam <b>1 jam</b>. Segera selesaikan pendaftaran!
</div>

<form id="daftarForm">
  <input id="nama" placeholder="Nama Lengkap" required>
  <input id="nip" placeholder="NIP" required>
  <input id="unit" placeholder="Unit Kerja" required>

  <label>Status Pegawai</label>
  <div class="btn-group">
    <button type="button" onclick="pilih(this,'status','PNS')">PNS</button>
    <button type="button" onclick="pilih(this,'status','PPPK')">PPPK</button>
  </div>

  <label>Jenis SDMK</label>
  <div class="btn-group">
    <button type="button" onclick="pilih(this,'jenis','Tenaga Medis')">Tenaga Medis</button>
    <button type="button" onclick="pilih(this,'jenis','Tenaga Kesehatan')">Tenaga Kesehatan</button>
    <button type="button" onclick="pilih(this,'jenis','Tenaga Penunjang')">Tenaga Penunjang</button>
  </div>

  <input id="jp_terakhir" type="number" placeholder="Jumlah JP Terakhir">

  <label>Tema Pembelajaran</label>
  <select id="tema" required>
    <option value="">-- Pilih Tema Pembelajaran --</option>
    <option>Optimalisasi Pemanfaatan SKP Platform dan Plataran Sehat dalam Pemenuhan Kecukupan SKP</option>
    
  </select>

  <label>Tanggal Kegiatan</label>
  <input id="tanggal" type="date" required>

  <input id="jp" type="number" placeholder="Jumlah JP yang Diikuti">

  <label>Platform Digital</label>
  <div class="btn-group">
    <button type="button" onclick="pilih(this,'platform','Zoom')">Zoom</button>
    <button type="button" onclick="pilih(this,'platform','Youtube')">YouTube</button>
  </div>

  <input id="wa" placeholder="Whatsapp / Telepon">
  <input id="email" type="email" placeholder="Email Aktif">

  <button class="submit-btn">üöÄ KIRIM PENDAFTARAN</button>
</form>

<div id="notif"></div>
</div>

<!-- SCRIPT LOGIKA PENDAFTARAN (TETAP SEPERTI SEBELUMNYA) -->
<script>
/* ================== PILIH BUTTON (TIDAK DIUBAH) ================== */
const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbzLQbWSl-M6y_td-eH88Hc08yBfJiqTAoO0URVyCIzg7qE8VWWyt2IQR1n1DlOav5gd1Q/exec";
let isSubmitting = false;

const pilihan = {};

function pilih(el, field, value){
  el.parentElement.querySelectorAll("button")
    .forEach(b => b.classList.remove("active"));
  el.classList.add("active");
  pilihan[field] = value;
}

/* ================== AMBIL ELEMENT DOM (TIDAK DIUBAH) ================== */
const daftarForm  = document.getElementById("daftarForm");
const notif       = document.getElementById("notif");
const statusWaktu = document.getElementById("statusWaktu");
const countdown   = document.getElementById("countdown");
const warning1jam = document.getElementById("warning1jam");

/* ================== KONFIGURASI WAKTU (TIDAK DIUBAH) ================== */
const PENDAFTARAN_MULAI   = "2026-01-15T08:00:00";
const PENDAFTARAN_SELESAI = "2026-01-21T23:59:00";

/* ================== LOCK / UNLOCK FORM (TIDAK DIUBAH) ================== */
function lockForm(msg){
  document.querySelectorAll("#daftarForm input, #daftarForm select, #daftarForm button")
    .forEach(el => el.disabled = true);
  daftarForm.style.opacity = 0.5;
  if(msg) notif.innerHTML = msg;
}

function unlockForm(){
  document.querySelectorAll("#daftarForm input, #daftarForm select, #daftarForm button")
    .forEach(el => el.disabled = false);
  daftarForm.style.opacity = 1;
}

/* ================== CEK WAKTU (TIDAK DIUBAH) ================== */
function cekWaktu(){
  const now = new Date();
  const mulai = new Date(PENDAFTARAN_MULAI);
  const selesai = new Date(PENDAFTARAN_SELESAI);

  if(now < mulai){
    statusWaktu.className = "status-waktu status-belum";
    statusWaktu.innerHTML =
      "‚è≥ Pendaftaran BELUM dibuka<br><small>Dibuka: " +
      mulai.toLocaleString("id-ID") + "</small>";
    lockForm();
  }
  else if(now > selesai){
    statusWaktu.className = "status-waktu status-tutup";
    statusWaktu.innerHTML =
      "üö´ Pendaftaran DITUTUP<br><small>Ditutup: " +
      selesai.toLocaleString("id-ID") + "</small>";
    lockForm("üö´ Pendaftaran telah ditutup otomatis");
  }
  else{
    statusWaktu.className = "status-waktu status-buka";
    statusWaktu.innerHTML =
      "üü¢ Pendaftaran DIBUKA<br><small>Sampai: " +
      selesai.toLocaleString("id-ID") + "</small>";
    unlockForm();
  }
}

/* ================== COUNTDOWN (TIDAK DIUBAH) ================== */
function updateCountdown(){
  const now = new Date();
  const mulai = new Date(PENDAFTARAN_MULAI);
  const selesai = new Date(PENDAFTARAN_SELESAI);

  let target, label;

  if(now < mulai){
    target = mulai;
    label = "‚è≥ Pendaftaran dibuka dalam:";
  }
  else if(now <= selesai){
    target = selesai;
    label = "‚è∞ Pendaftaran ditutup dalam:";
  }
  else{
    countdown.innerHTML = "üö´ Pendaftaran telah ditutup";
    return;
  }

  const diff = target - now;
  const d = Math.floor(diff / (1000*60*60*24));
  const h = Math.floor(diff / (1000*60*60) % 24);
  const m = Math.floor(diff / (1000*60) % 60);
  const s = Math.floor(diff / 1000 % 60);

  if(diff <= 3600000 && diff > 0){
    warning1jam.style.display = "block";
  }

  countdown.innerHTML = `
    ${label}
    <div class="countdown-time">
      ${d} hari ${h} jam ${m} menit ${s} detik
    </div>
  `;
}

/* ================== SUBMIT FORM (FIX UTAMA DI SINI) ================== */
daftarForm.addEventListener("submit", function(e){
  e.preventDefault();
  if(isSubmitting) return;

  if(!pilihan.status || !pilihan.jenis || !pilihan.platform){
    notif.innerHTML = "‚ö†Ô∏è Lengkapi Status Pegawai, Jenis SDMK, dan Platform";
    return;
  }

  isSubmitting = true;
  notif.innerHTML = "‚è≥ Mengirim data ke Google Sheet...";

  const formData = new FormData();
  formData.append("nama", nama.value);
  formData.append("nip", nip.value);
  formData.append("unit", unit.value);
  formData.append("status", pilihan.status);
  formData.append("jenis", pilihan.jenis);
  formData.append("jp_terakhir", jp_terakhir.value);
  formData.append("tema", tema.value);
  formData.append("tanggal", tanggal.value);
  formData.append("jp", jp.value);
  formData.append("platform", pilihan.platform);
  formData.append("wa", wa.value);
  formData.append("email", email.value);

  fetch(WEBAPP_URL, {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(res => {
    notif.innerHTML = "‚úÖ Data berhasil disimpan ke Google Sheet";
    daftarForm.reset();
    document.querySelectorAll(".btn-group button")
      .forEach(b => b.classList.remove("active"));
    isSubmitting = false;
  })
  .catch(err => {
    notif.innerHTML = "‚ùå Gagal mengirim data";
    console.error(err);
    isSubmitting = false;
  });
});

/* ================== AKTIFKAN (TIDAK DIUBAH) ================== */
cekWaktu();
updateCountdown();
setInterval(cekWaktu, 60000);
setInterval(updateCountdown, 1000);
</script>


</body>
</html>
