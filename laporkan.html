<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form Pengaduan SDM Kesehatan</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f1f5f9;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --primary:#2563eb;
  --secondary:#1e40af;
}

[data-theme="dark"]{
  --bg:#020617;
  --card:#020617;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --primary:#60a5fa;
  --secondary:#2563eb;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,sans-serif;
  background:linear-gradient(135deg,var(--bg),#0f172a10);
  min-height:100vh;
  padding:24px;
  color:var(--text);
  transition:.3s;
}

/* HEADER */
.header{
  max-width:720px;
  margin:auto auto 20px;
  padding:26px;
  border-radius:22px;
  background:linear-gradient(135deg,var(--primary),var(--secondary));
  color:white;
  box-shadow:0 20px 50px rgba(0,0,0,.3);
  position:relative;
}
.toggle{
  position:absolute;
  top:18px;
  right:18px;
  cursor:pointer;
  font-size:14px;
  opacity:.9;
}

/* FORM */
.card{
  max-width:720px;
  margin:auto;
  background:var(--card);
  padding:30px;
  border-radius:24px;
  box-shadow:0 20px 45px rgba(0,0,0,.15);
}

label{font-weight:600;font-size:14px}
input,textarea,select{
  width:100%;
  padding:14px;
  margin-top:6px;
  margin-bottom:16px;
  border-radius:14px;
  border:1px solid #cbd5f5;
  font-family:inherit;
}
textarea{min-height:120px}

button{
  width:100%;
  padding:15px;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,var(--primary),var(--secondary));
  color:white;
  font-weight:700;
  cursor:pointer;
}

.ticket{
  margin-top:20px;
  padding:16px;
  border-radius:14px;
  background:rgba(34,197,94,.15);
  color:#16a34a;
  font-weight:600;
  display:none;
}
</style>
</head>

<body>

<div class="header">
  <div class="toggle" onclick="toggleTheme()">üåô Dark Mode</div>
  <h2>üõ°Ô∏è Form Pengaduan SDM Kesehatan</h2>
  <p>Simpan kode tiket untuk tindak lanjut</p>
</div>

<div class="card">
<form id="pengaduanForm">
  <label>Nama Pelapor</label>
  <input name="nama" required>

  <label>Email</label>
  <input name="email" type="email" required>

  <label>Telepon</label>
  <input name="telp">

  <label>Jenis SDM</label>
  <select id="jenisSDM" name="jenisSDM" required></select>

  <label>Unit Kerja / Faskes</label>
  <input name="unitKerja" required>

  <label>Deskripsi Pengaduan</label>
  <textarea name="deskripsi" required></textarea>

  <label>Anonim?</label>
  <select name="anonim">
    <option>Tidak</option>
    <option>Ya</option>
  </select>

  <button>Kirim Pengaduan</button>
</form>

<div class="ticket" id="ticketBox"></div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbz6-vJhkhuBTIXTFbITx5tD8Z6f8CAWo9knfISDP-LEEzOl5oRg-KvWO1xfyrNhYphu/exec";

/* DARK MODE */
function toggleTheme(){
  const t = document.documentElement.getAttribute("data-theme")==="dark"?"":"dark";
  document.documentElement.setAttribute("data-theme",t);
  localStorage.setItem("theme",t);
}
document.documentElement.setAttribute(
  "data-theme",
  localStorage.getItem("theme") || ""
);

/* LOAD JENIS SDM */
fetch(scriptURL+"?action=getJenisSDM")
.then(r=>r.json())
.then(d=>{
  jenisSDM.innerHTML='<option value="">Pilih Jenis SDM</option>';
  d.forEach(x=>{
    jenisSDM.innerHTML+=`<option>${x}</option>`;
  });
});

/* SUBMIT */
pengaduanForm.addEventListener("submit",e=>{
  e.preventDefault();
  fetch(scriptURL,{method:"POST",body:new FormData(e.target)})
    .then(r=>r.json())
    .then(res=>{
      document.getElementById("ticketBox").style.display="block";
      document.getElementById("ticketBox").innerHTML =
        "‚úÖ Pengaduan diterima.<br>Kode Tiket Anda: <b>"+res.ticket+"</b>";
      e.target.reset();
    });
});
</script>

</body>
</html>
