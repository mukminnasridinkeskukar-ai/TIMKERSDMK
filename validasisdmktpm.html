<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Form Validasi SDMK</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Segoe UI',Arial,sans-serif;
  background:linear-gradient(135deg,#1e3a8a,#2563eb);
}
.card{
  background:#fff;
  width:100%;
  max-width:520px;
  padding:30px;
  border-radius:18px;
  box-shadow:0 20px 45px rgba(0,0,0,.25);
}
h2{text-align:center;color:#1e3a8a;margin:0}
.subtitle{text-align:center;color:#64748b;font-size:14px;margin:8px 0 24px}
.form-group{margin-bottom:16px}
label{font-size:14px;font-weight:600;margin-bottom:6px;display:block}
input,select{
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid #cbd5e1;
  font-size:14px;
}
input:focus,select:focus{
  outline:none;
  border-color:#2563eb;
  box-shadow:0 0 0 3px rgba(37,99,235,.2);
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#2563eb;
  color:#fff;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
button:disabled{background:#93c5fd}
#status{text-align:center;margin-top:15px;font-weight:600}
</style>
</head>

<body>

<div class="card">
  <h2>Form Validasi SDMK</h2>
  <p class="subtitle">Praktik Mandiri Tenaga Medis & Tenaga Kesehatan</p>

  <form id="form">
    <div class="form-group">
      <label>Nama Lengkap</label>
      <input name="nama_lengkap" required>
    </div>

    <div class="form-group">
      <label>Profesi</label>
      <input name="profesi" required>
    </div>

    <div class="form-group">
      <label>Unit Kerja</label>
      <input name="unit_kerja" required>
    </div>

    <div class="form-group">
      <label>Jenis Validasi</label>
      <select name="jenis_validasi" required>
        <option value="">— Pilih —</option>
        <option>Validasi Data Existing</option>
        <option>Validasi SIP</option>
        <option>Validasi Calon Pekerja</option>
      </select>
    </div>

    <div class="form-group">
      <label>Tujuan Validasi</label>
      <select name="tujuan_validasi" required>
        <option value="">— Pilih —</option>
        <option>Perubahan Data SIP</option>
        <option>Habis Kontrak</option>
        <option>Data Ganda / Duplikasi</option>
        <option>Salah Data</option>
      </select>
    </div>

    <div class="form-group">
      <label>Nomor Whatsapp</label>
      <input name="nomor_whatsapp" placeholder="08xxxxxxxxxx" required>
    </div>

    <div class="form-group">
      <label>Alamat Email</label>
      <input type="email" name="alamat_email" required>
    </div>

    <button type="submit">Kirim Validasi</button>
    <div id="status"></div>
  </form>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzK1unq6J-T3jI39V0KTtKVmaY9KumGl7WqMiRIMIXfMHes9In0JEZAg1Wrhvl7QsP3/exec";

const form = document.getElementById("form");
const statusEl = document.getElementById("status");
const btn = form.querySelector("button");

form.addEventListener("submit", e=>{
  e.preventDefault();

  statusEl.style.color="#2563eb";
  statusEl.innerHTML="⏳ Mengirim data...";
  btn.disabled=true;

  const data = new URLSearchParams(new FormData(form));

  fetch(API_URL,{
    method:"POST",
    body:data
  })
  .then(res=>res.json())
  .then(res=>{
    statusEl.style.color="#16a34a";
    statusEl.innerHTML="✅ Data terkirim. Konfirmasi dikirim via Email & WhatsApp.";

    if(res.wa){
      setTimeout(()=>{
        window.open(res.wa,"_blank");
      },1200);
    }

    form.reset();
  })
  .catch(()=>{
    statusEl.style.color="#dc2626";
    statusEl.innerHTML="❌ Gagal mengirim data";
  })
  .finally(()=>{
    btn.disabled=false;
  });
});
</script>

</body>
</html>
